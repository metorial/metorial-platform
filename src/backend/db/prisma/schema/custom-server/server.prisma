enum CustomServerType {
  remote
}

enum CustomServerStatus {
  active
  archived
  deleted
}

model CustomServer {
  oid    BigInt             @id @default(autoincrement())
  id     String             @unique
  type   CustomServerType
  status CustomServerStatus @default(active)

  isEphemeral Boolean

  name        String
  description String?

  maxVersionIndex Int @default(0)

  organizationOid BigInt
  organization    Organization @relation(fields: [organizationOid], references: [oid])

  serverOid BigInt @unique
  server    Server @relation(fields: [serverOid], references: [oid])

  serverVariantOid BigInt        @unique
  serverVariant    ServerVariant @relation(fields: [serverVariantOid], references: [oid])

  instanceOid BigInt
  instance    Instance @relation(fields: [instanceOid], references: [oid])

  currentVersionOid BigInt?              @unique
  currentVersion    CustomServerVersion? @relation(fields: [currentVersionOid], references: [oid], name: "CurrentCustomServerVersion")

  createdAt DateTime  @default(now())
  updatedAt DateTime  @default(now()) @updatedAt
  deletedAt DateTime?

  versions CustomServerVersion[]
  events   CustomServerEvent[]
}
