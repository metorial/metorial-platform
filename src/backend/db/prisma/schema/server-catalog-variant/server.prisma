enum ServerType {
  imported
  custom
}

enum ServerStatus {
  active
  inactive
}

model Server {
  oid    BigInt       @id @default(autoincrement())
  id     String       @unique
  type   ServerType
  status ServerStatus @default(active)

  name        String
  description String?

  metadata Json?

  importedServer ImportedServer?
  customServer   CustomServer?

  isPublic Boolean @default(true)

  ownerOrganizationOid BigInt?
  ownerOrganization    Organization? @relation(fields: [ownerOrganizationOid], references: [oid])

  variants        ServerVariant[]
  versions        ServerVersion[]
  schemas         ServerConfigSchema[]
  listing         ServerListing?
  deployments     ServerDeployment[]
  errorGroups     ServerRunErrorGroup[]
  implementations ServerImplementation[]
  instanceServers InstanceServer[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@index([type])
}
