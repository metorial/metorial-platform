enum ServerVariantSourceType {
  docker
  remote
}

model ServerVariant {
  oid BigInt @id @default(autoincrement())
  id  String @unique

  identifier String @unique

  providerOid BigInt
  provider    ServerVariantProvider @relation(fields: [providerOid], references: [oid])

  serverOid BigInt
  server    Server @relation(fields: [serverOid], references: [oid])

  currentVersionOid BigInt?
  currentVersion    ServerVersion? @relation(fields: [currentVersionOid], references: [oid], name: "ServerVariantCurrentServerConfig")

  sourceType ServerVariantSourceType

  dockerImage String?
  remoteUrl   String?

  /// [ServerVersionTools]
  tools Json @default("null")

  /// [ServerVersionPrompts]
  prompts Json @default("null")

  /// [ServerVersionResourceTemplates]
  resourceTemplates Json @default("null")

  /// [ServerVersionServerInfo]
  serverInfo Json @default("null")

  /// [ServerVersionServerCapabilities]
  serverCapabilities Json @default("null")

  versions             ServerVersion[]
  schemas              ServerConfigSchema[]
  ServerImplementation ServerImplementation[]
  ServerDeployment     ServerDeployment[]

  createdAt DateTime @default(now())
}
