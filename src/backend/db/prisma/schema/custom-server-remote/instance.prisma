enum RemoteServerInstanceProviderOAuthDiscoveryStatus {
  pending
  completed_config_found
  completed_no_config_found
}

enum RemoteServerStatus {
  pending
  active
}

model RemoteServerInstance {
  oid BigInt @id @default(autoincrement())
  id  String @unique

  status RemoteServerStatus @default(pending)

  name        String?
  description String?

  remoteUrl String

  connectionOid BigInt?
  connection    ProviderOAuthConnection? @relation(fields: [connectionOid], references: [oid])

  instanceOid BigInt
  instance    Instance @relation(fields: [instanceOid], references: [oid])

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  providerOAuthDiscoveryStatus      RemoteServerInstanceProviderOAuthDiscoveryStatus @default(pending)
  providerOAuthDiscoveryDocumentOid BigInt?
  providerOAuthDiscoveryDocument    ProviderOAuthDiscoveryDocument?                  @relation(fields: [providerOAuthDiscoveryDocumentOid], references: [oid])

  customServerVersions CustomServerVersion?
}
