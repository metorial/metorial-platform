enum SessionEventType {
  server_run_error
  server_logs
}

model SessionEvent {
  oid  BigInt           @id @default(autoincrement())
  id   String           @unique
  type SessionEventType

  payload  Json?
  logLines String[] @default([])

  sessionOid BigInt
  session    Session @relation(fields: [sessionOid], references: [oid])

  serverRunOid BigInt?
  serverRun    ServerRun? @relation(fields: [serverRunOid], references: [oid])

  serverRunErrorOid BigInt?
  serverRunError    ServerRunError? @relation(fields: [serverRunErrorOid], references: [oid])

  engineEventId String? @unique @db.Uuid

  createdAt DateTime @default(now())
}
