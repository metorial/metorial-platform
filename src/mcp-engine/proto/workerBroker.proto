syntax = "proto3";

package broker.workerBroker;

option go_package = "github.com/metorial/metorial/mcp-engine/gen/mcp-engine/workerBroker;workerBroker";

import "worker.proto";

service McpWorkerBroker {
  rpc ListManagers(broker.workerBroker.ListManagersRequest) returns (broker.workerBroker.ListManagersResponse);
  rpc RegisterWorker(broker.workerBroker.RegisterWorkerRequest) returns (broker.workerBroker.RegisterWorkerResponse);
  rpc GetManagerInfo(broker.workerBroker.GetManagerInfoRequest) returns (broker.workerBroker.GetManagerInfoResponse);
}

message ListManagersRequest {}

message ListManagersResponse {
  repeated Manager managers = 1;
}

message Manager {
  string id = 1;
  string managerAddress = 2;
  string workerBrokerAddress = 3;
}

message RegisterWorkerRequest {
  string worker_id = 1;
  string address = 2;
  broker.worker.WorkerType worker_type = 3;
}

message RegisterWorkerResponse {}

message GetManagerInfoRequest {}

message GetManagerInfoResponse {
  string id = 1;
  string managerAddress = 2;
  string workerBrokerAddress = 3;
}